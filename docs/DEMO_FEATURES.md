# デモモード機能ガイド

## 概要

本システムには、Azureサービスへの接続なしで全機能をデモンストレーションできる「デモモード」が実装されています。

## デモモードの特徴

### 1. **テキストアップロード機能**
- デモモード時のみ、音声ファイルの代わりにテキストで商談内容を入力可能
- アップロードページで「音声ファイル」⇔「テキスト入力」をトグル切り替え
- 実際のデモで音声ファイルを準備する手間を削減

### 2. **リアルな大量MOCKデータ**
- **20件の商談セッション**データを自動生成
- 各セッションには以下を含む：
  - 顧客名（20種類のバリエーション）
  - 店舗ID（5店舗）
  - 営業担当者（5名）
  - 詳細な会話の文字起こし
  - センチメント分析結果
  - AI要約（要点、懸念事項、次アクション等）
  - アウトカムラベル（成約率40%で設定）

### 3. **承認機能のデモ**
- **5件の承認待ちリクエスト**を自動生成
- 期限超過フラグのシミュレーション（30%の確率）
- 承認・却下の操作が可能（モック処理）
- 承認キューページで実際のワークフローを体験可能

### 4. **KPIダッシュボード**
- 店舗別のパフォーマンスデータを自動計算
  - 総商談数
  - 成約数・失注数・保留数
  - 成約率（Conversion Rate）
- 棒グラフでの視覚化
- 5店舗分のKPIカード表示

## MOCKデータの内訳

### セッションデータ（20件）

#### 車両タイプ別の商談パターン
1. **SUV** - 家族向け、予算400万円
2. **コンパクトカー** - 通勤用、予算250万円
3. **セダン** - ビジネス用、予算600万円
4. **ミニバン** - 子育て用、予算350万円

各パターンにリアルな会話の流れを実装：
- 営業担当の挨拶・ヒアリング
- 顧客のニーズ表明
- 商品提案
- 質疑応答
- クロージング

#### アウトカム分布
- **成約（won）**: 40% (8件)
- **失注（lost）**: 35% (7件)
- **保留（pending）**: 10% (2件)
- **未ラベル（null）**: 15% (3件)

#### 時系列分布
- 過去30日以内にランダム分散
- 最新のセッションから過去1ヶ月分

### 店舗分布
- 東京本店
- 横浜支店
- 千葉支店
- 埼玉支店
- 神奈川支店

各店舗に均等にセッションを割り当て

### 営業担当者
- 営業A
- 営業B
- 営業C
- 営業D
- 営業E

## デモシナリオ例

### シナリオ1: 新規商談の登録からラベル申請まで

1. **アップロードページ**
   - デモモードに切り替え
   - 「テキスト入力」モードを選択
   - 以下のような商談内容を入力：
     ```
     営業: いらっしゃいませ。本日はどのようなお車をお探しでしょうか？
     顧客: 家族向けのSUVを探しています。
     営業: ご予算はお決まりですか？
     顧客: 400万円くらいを考えています。
     ```
   - アップロードを実行

2. **セッション一覧ページ**
   - 新規作成されたセッションを確認
   - 20件のデモデータも表示されている

3. **セッション詳細ページ**
   - 文字起こし内容を確認
   - AI要約を確認
   - アウトカムラベル申請フォームから「成約」を申請

### シナリオ2: 承認ワークフローのデモ

1. **承認キューページ**
   - 5件の承認待ちリクエストを確認
   - 期限超過のアイテムを識別（赤色表示）

2. **承認/却下の実行**
   - 任意のリクエストを承認
   - デモモードのため即座に反映

3. **セッション一覧で確認**
   - 承認されたセッションにラベルが付与されていることを確認

### シナリオ3: KPIダッシュボードの閲覧

1. **KPIページ**
   - 5店舗の成績を確認
   - 棒グラフで成約・失注・保留の分布を視覚的に確認
   - 各店舗の成約率を比較

2. **データの意味**
   - 東京本店: 4件中40%成約
   - その他の店舗も同様のデータ構造

## 技術実装の詳細

### データ生成ロジック
- ファイル: `frontend/src/lib/mock-data.ts`
- 関数:
  - `generateMockSessions(count)`: セッションデータ生成
  - `generateKpiData(sessions)`: KPIデータ計算
  - `generateApprovalQueue(sessions)`: 承認キュー生成

### APIモックの実装
- ファイル: `frontend/src/app/api-proxy.ts`
- 全APIエンドポイントをモック化：
  - `/ListMySessions` - セッション一覧
  - `/GetSession?sessionId=xxx` - セッション詳細
  - `/ListApprovalQueue` - 承認キュー
  - `/GetKpi` - KPIデータ
  - `/UploadAudio` - テキスト/音声アップロード
  - `/CreateOutcomeLabel` - ラベル申請
  - `/ApproveOutcomeLabel` - 承認
  - `/RejectOutcomeLabel` - 却下

### UIコンポーネント
- ファイル: `frontend/src/components/AudioUploadDropzone.tsx`
- デモモード判定でテキスト入力モードを表示
- トグルボタンで音声/テキスト切り替え

## デモモードの切り替え

### 有効化
サイドバーの「デモモード」トグルをONにする

### 無効化（本番モード）
サイドバーの「デモモード」トグルをOFFにする
→ 実際のAzure Functions APIに接続

## メリット

1. **オフラインデモ可能**: インターネット接続不要
2. **即座に体験**: セットアップ作業なし
3. **リアルなデータ**: 実際の業務フローを再現
4. **安全**: 本番データに影響なし
5. **柔軟**: テキストで自由にシナリオ作成

## 注意事項

- デモモードで作成したデータは**ブラウザのメモリ内のみ**に保存
- ページをリロードすると、テキストアップロードで作成したデータは消失（初期20件は再生成）
- 本番環境ではデモモードを無効にしてください
